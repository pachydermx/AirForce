function DrawRect(t){this.canvas=t,this.foreground=document.createElement("canvas"),this.foreground.width=this.canvas.width,this.foreground.height=this.canvas.height,this.foreground.style.position="absolute",this.foreground.style.borderStyle=this.canvas.style.borderStyle,this.foreground.style.borderWidth=this.canvas.style.borderWidth,this.foreground.style.padding=this.canvas.style.padding,this.foreground.style.margin=this.canvas.style.margin,this.foreground.style.zIndex="1",this.canvas.parentNode.appendChild(this.foreground),this.foreground.addEventListener("mousedown",this.mousedown.bind(this),!1),this.mousemove=this.mousemove.bind(this),this.mouseup=this.mouseup.bind(this)}DrawRect.prototype.lastPos={x:0,y:0},DrawRect.prototype.fillStyle="rgba(0, 0, 0, 0.1)",DrawRect.prototype.clear=function(){var t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height)},DrawRect.prototype.transCoord=function(t){var e=this.canvas.getBoundingClientRect(),o=Math.round(e.left)+this.canvas.clientLeft,s=Math.round(e.top)+this.canvas.clientTop,r=t.clientX-o,i=t.clientY-s;return{x:r,y:i}},DrawRect.prototype.drawRect=function(t,e,o,s){var r=this.canvas.getContext("2d");r.fillStyle=this.fillStyle,r.fillRect(t,e,o,s)},DrawRect.prototype.clearForeground=function(){var t=this.foreground.getContext("2d");t.clearRect(0,0,this.foreground.width,this.foreground.height)},DrawRect.prototype.mousedown=function(t){var e=this.transCoord(t);this.lastPos=e;var o=Math.floor(256*Math.random()),s=Math.floor(256*Math.random()),r=Math.floor(256*Math.random()),i=.9*Math.random()+.1;this.fillStyle="rgba("+o+","+s+","+r+","+i+")",document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),t.preventDefault()},DrawRect.prototype.mousemove=function(t){this.clearForeground();var e=this.foreground.getContext("2d");e.fillStyle=this.fillStyle;var o=this.transCoord(t),s=o.x-this.lastPos.x,r=o.y-this.lastPos.y;e.fillRect(this.lastPos.x,this.lastPos.y,s,r)},DrawRect.prototype.mouseup=function(t){var e=this.canvas.getContext("2d"),o=this.transCoord(t);e.fillStyle=this.fillStyle;var s=o.x-this.lastPos.x,r=o.y-this.lastPos.y;e.fillRect(this.lastPos.x,this.lastPos.y,s,r),this.clearForeground(),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1)};