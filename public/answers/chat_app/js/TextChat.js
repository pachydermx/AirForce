function TextChat(t,o,e){this.url=t,this.socket=null,this.from="",this.$console=$(o),this.updateUICallback=e||function(){}}TextChat.prototype.sendJsonMsg=function(t){null!=this.socket&&1===this.socket.readyState?(t.from=this.from,this.socket.send(JSON.stringify(t))):alert("WebSocket is not opened")},TextChat.prototype.handleJsonMsg=function(t){if("message"===t.type){var o=t.from+" > "+t.text;this.outputToConsole(o)}else"clearAll"===t.type&&this.$console.empty()},TextChat.prototype.outputToConsole=function(t,o){var e=$("<p></p>").text(t);o&&e.css("color",o),this.$console.prepend(e)},TextChat.prototype.connect=function(t){this.from=t,this.socket=new WebSocket(this.url);var o=this;this.socket.onopen=function(){o.outputToConsole("WebSocket opened.","salmon"),o.updateUICallback()},this.socket.onmessage=function(t){var e=JSON.parse(t.data);o.handleJsonMsg(e)},this.socket.onclose=function(){o.outputToConsole("WebSocket closed.","salmon"),o.socket=null,o.updateUICallback()}},TextChat.prototype.disconnect=function(){null!=this.socket?(this.socket.close(),this.socket=null):alert("WebSocket is not opened.")};