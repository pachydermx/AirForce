$(document).ready(function(){function n(){null==t.socket?($("#connect_button").prop("disabled",!1),$("#name").prop("disabled",!1),$("#disconnect_button").prop("disabled",!0),$("#send_button").prop("disabled",!0)):($("#connect_button").prop("disabled",!0),$("#name").prop("disabled",!0),$("#disconnect_button").prop("disabled",!1),$("#send_button").prop("disabled",!1))}function e(){t.sendJsonMsg({type:"message",text:$("#message").val()})}var t,o="ws://"+document.location.host,c=document.getElementById("console");t=new TextChat(o,c,n),$("#connect_button").on("click",function(){t.connect($("#name").val())}),$("#disconnect_button").on("click",function(){t.disconnect()}),$("#send_button").on("click",function(){e()}),$("#message").on("keypress",function(n){13==n.keyCode&&e()}),$("#clear_all_button").on("click",function(){t.sendJsonMsg({type:"clearAll"})}),$("#name").attr("value",function(){var n=new Date;return"user"+n.getTime()%1e4}()),n()});